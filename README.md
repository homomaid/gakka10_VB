# gakka10_VB
## What is this ?
本学にて作成している「ヴァーチャルボーリング」というソフトウェアにおける、カメラモジュールです。
主にボールの検出とモーションの追跡を行います。

## ファイル構成
### ball.py
ボールについてのクラスを定義しています。
    
#### field
- Ball.diameter

ボールの直径の情報を保持しています。

### camera.py
二次元的に物体の運動を観測する用の NormalCamera クラスと、
三次元的に物体の運動を観測する用の StereoCamera クラスが用意されています。
    
ダックタイピングにより、NormalCamera クラスと StereoCamera クラスには互換性が備わっています。
現状、StereoCamera クラスは未実装です。

#### method
- __init__(self, camera_id)

カメラ ID を入力して、そのカメラにて映像を表示するためのオブジェクトを生成します。
StereoCamera クラスの場合、このメソッドの中でカメラキャリブレーションを行なうことになるでしょう。

- detectBallProperty(self, color)

画面に表示される、検出できた円がひとつのみ場合に Enter キーを押すと、
その円を運動を追いたいボールであるとして、Ball オブジェクトを返します。
半径の値をコンソール上に表示しますので、値が安定してから Enter キーを押すと動作が安定するでしょう。

Esc キーを押すとプログラムを終了させます。
    
- detectBallMotion(self, ball)

ボールの運動の解析した情報を返します。

### constant.py
プログラム内に登場する諸定数を定義しています。

#### list
- BALL_COLOR

想定しているボールの色情報を入力します。
HSV色空間に則り、(H, S, V) のフォーマットで記述してください。

- MODE_3D

True にすると NormalCamera の代わりに StereoCamera オブジェクトを生成します。

### main.py
プログラム実行用のファイルです。
これまでに紹介した諸々を用いて、ボールの検出、モーションの追跡、追跡データのゲームモジュールへの送信を行います。
    
基本的に編集しない方がよろしいでしょう。

## TODO
- C++への移行（パフォーマンスに問題が出る場合）
- StereoCamera クラスの実装

## 依存しているライブラリ
- OpenCV 3.1